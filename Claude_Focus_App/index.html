<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="description"
        content="Mind Gym - Train your focus, attention, and mental clarity with interactive exercises and meditation tools.">
    <title>Mind Gym - Focus & Attention Training</title>

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#1a1816">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Mind Gym">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-512.png">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500&family=Playfair+Display:wght@400;500;600;700&family=Source+Sans+3:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Scripts -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="app-container">
        <!-- Top Navigation -->
        <header class="top-nav" id="top-nav">
            <div class="nav-inner">
                <a href="#" class="logo" data-view="dashboard">
                    <i data-lucide="brain" class="logo-icon"></i>
                    <span class="logo-text">Mind Gym</span>
                </a>

                <nav class="nav-menu">
                    <div class="nav-group">
                        <span class="nav-group-label">Exercises</span>
                        <div class="nav-items">
                            <a href="#" class="nav-item active" data-view="dashboard" title="Dashboard">
                                <i data-lucide="layout-dashboard"></i>
                                <span>Dashboard</span>
                            </a>
                            <a href="#" class="nav-item" data-view="beep-tracker" title="Beep Tracker">
                                <i data-lucide="volume-2"></i>
                                <span>Beep Tracker</span>
                            </a>
                            <a href="#" class="nav-item" data-view="time-estimation" title="Time Estimation">
                                <i data-lucide="timer"></i>
                                <span>Time</span>
                            </a>
                            <a href="#" class="nav-item" data-view="reaction-test" title="Reaction Test">
                                <i data-lucide="zap"></i>
                                <span>Reaction</span>
                            </a>
                            <a href="#" class="nav-item" data-view="memory-sequence" title="Memory Sequence">
                                <i data-lucide="grid-3x3"></i>
                                <span>Memory</span>
                            </a>
                            <a href="#" class="nav-item" data-view="focus-counter" title="SART Test">
                                <i data-lucide="brain"></i>
                                <span>SART</span>
                            </a>
                        </div>
                    </div>

                    <div class="nav-group">
                        <span class="nav-group-label">Meditation</span>
                        <div class="nav-items">
                            <a href="#" class="nav-item" data-view="guided-meditation" title="Guided Sessions">
                                <i data-lucide="headphones"></i>
                                <span>Guided</span>
                            </a>
                            <a href="#" class="nav-item" data-view="meditation-room" title="Meditation Room">
                                <i data-lucide="cloud"></i>
                                <span>Room</span>
                            </a>
                            <a href="#" class="nav-item" data-view="meditation-timer" title="Timer">
                                <i data-lucide="clock"></i>
                                <span>Timer</span>
                            </a>
                        </div>
                    </div>

                    <div class="nav-group">
                        <span class="nav-group-label">Insights</span>
                        <div class="nav-items">
                            <a href="#" class="nav-item" data-view="analytics" title="Analytics">
                                <i data-lucide="bar-chart-3"></i>
                                <span>Analytics</span>
                            </a>
                            <a href="#" class="nav-item" data-view="settings" title="Settings">
                                <i data-lucide="settings"></i>
                                <span>Settings</span>
                            </a>
                        </div>
                    </div>
                </nav>

                <div class="nav-right">
                    <div class="streak-badge" title="Current Streak">
                        <i data-lucide="flame"></i>
                        <span id="streak-count">0</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <header class="top-bar">
                <button class="menu-toggle" id="menu-toggle">
                    <i data-lucide="menu"></i>
                </button>
                <div class="header-stats">
                    <div class="stat-pill">
                        <i data-lucide="clock"></i>
                        <span id="today-time">0m</span> today
                    </div>
                    <div class="stat-pill">
                        <i data-lucide="target"></i>
                        <span id="sessions-today">0</span> sessions
                    </div>
                </div>
            </header>

            <div class="content-area" id="content-area">
                <!-- Dashboard View -->
                <section class="view active" id="view-dashboard">
                    <div class="view-header">
                        <h1>Welcome to Mind Gym</h1>
                        <p class="subtitle">Train your focus, sharpen your attention</p>
                    </div>

                    <div class="quick-stats">
                        <div class="stat-card">
                            <div class="stat-icon"><i data-lucide="clock"></i></div>
                            <div class="stat-info">
                                <span class="stat-value" id="total-time">0h 0m</span>
                                <span class="stat-label">Total Training</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon"><i data-lucide="calendar-check"></i></div>
                            <div class="stat-info">
                                <span class="stat-value" id="total-sessions">0</span>
                                <span class="stat-label">Sessions Completed</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon"><i data-lucide="flame"></i></div>
                            <div class="stat-info">
                                <span class="stat-value" id="current-streak">0 days</span>
                                <span class="stat-label">Current Streak</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon"><i data-lucide="trophy"></i></div>
                            <div class="stat-info">
                                <span class="stat-value" id="best-streak">0 days</span>
                                <span class="stat-label">Best Streak</span>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-grid">
                        <div class="card chart-card">
                            <h3>Weekly Activity</h3>
                            <canvas id="weekly-chart"></canvas>
                        </div>

                        <div class="card">
                            <h3>Quick Start</h3>
                            <div class="quick-actions">
                                <button class="action-btn" data-action="beep-tracker">
                                    <i data-lucide="volume-2"></i>
                                    <span>Beep Tracker</span>
                                </button>
                                <button class="action-btn" data-action="time-estimation">
                                    <i data-lucide="timer"></i>
                                    <span>Time Estimation</span>
                                </button>
                                <button class="action-btn" data-action="meditation-room">
                                    <i data-lucide="cloud"></i>
                                    <span>Meditation Room</span>
                                </button>
                                <button class="action-btn" data-action="reaction-test">
                                    <i data-lucide="zap"></i>
                                    <span>Reaction Test</span>
                                </button>
                            </div>
                        </div>

                        <div class="card">
                            <h3>Recent Sessions</h3>
                            <div class="recent-sessions" id="recent-sessions">
                                <p class="empty-state">No sessions yet. Start training!</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Beep Tracker View -->
                <section class="view" id="view-beep-tracker">
                    <div class="view-header">
                        <h1>Beep Tracker</h1>
                        <p class="subtitle">Count random beeps and test your auditory attention</p>
                    </div>

                    <div class="exercise-container">
                        <div class="exercise-settings card" id="beep-settings">
                            <h3>Settings</h3>
                            <div class="setting-group">
                                <label>Beep Interval Range (seconds)</label>
                                <div class="range-inputs">
                                    <input type="number" id="beep-min-interval" value="2" min="1" max="30">
                                    <span>to</span>
                                    <input type="number" id="beep-max-interval" value="8" min="1" max="60">
                                </div>
                            </div>
                            <div class="setting-group">
                                <label>Session Duration (minutes)</label>
                                <input type="number" id="beep-duration" value="2" min="1" max="30" class="full-width">
                            </div>
                            <div class="instruction-box">
                                <i data-lucide="info"></i>
                                <span>Listen carefully and count every beep. Enter your total at the end.</span>
                            </div>
                            <button class="btn btn-primary btn-large" id="beep-start">
                                <i data-lucide="play"></i>
                                Start Exercise
                            </button>
                        </div>

                        <div class="exercise-active card hidden" id="beep-active">
                            <div class="exercise-display">
                                <div class="big-timer" id="beep-timer">2:00</div>
                                <div class="exercise-status" id="beep-status">Listen and count each beep...</div>
                                <div class="focus-visual" id="beep-visual">
                                    <div class="focus-circle"></div>
                                </div>
                            </div>
                            <p class="listening-hint">Close your eyes and focus on counting</p>
                            <button class="btn btn-secondary" id="beep-stop">End Early</button>
                        </div>

                        <div class="exercise-input card hidden" id="beep-input">
                            <h3>Time's Up!</h3>
                            <p class="input-prompt">How many beeps did you count?</p>
                            <input type="number" id="beep-user-count" min="0" max="999" placeholder="Enter your count"
                                class="count-input">
                            <button class="btn btn-primary btn-large" id="beep-submit">
                                <i data-lucide="check"></i>
                                Submit Answer
                            </button>
                        </div>

                        <div class="exercise-results card hidden" id="beep-results">
                            <h3>Session Complete!</h3>
                            <div class="results-display">
                                <div class="result-big">
                                    <span class="result-value" id="beep-final-accuracy">0%</span>
                                    <span class="result-label">Accuracy</span>
                                </div>
                            </div>
                            <div class="results-details">
                                <div class="result-item">
                                    <span>Actual Beeps</span>
                                    <span id="beep-final-total">0</span>
                                </div>
                                <div class="result-item">
                                    <span>Your Count</span>
                                    <span id="beep-final-user-count">0</span>
                                </div>
                                <div class="result-item">
                                    <span>Difference</span>
                                    <span id="beep-final-difference">0</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" id="beep-restart">Try Again</button>
                        </div>
                    </div>
                </section>

                <!-- Time Estimation View -->
                <section class="view" id="view-time-estimation">
                    <div class="view-header">
                        <h1>Time Estimation</h1>
                        <p class="subtitle">Train your internal clock</p>
                    </div>

                    <div class="exercise-container">
                        <div class="exercise-settings card" id="time-settings">
                            <h3>Settings</h3>

                            <div class="setting-group">
                                <label>Game Mode</label>
                                <div class="mode-selector">
                                    <button class="mode-btn active" data-mode="target" id="mode-target">
                                        <i data-lucide="target"></i>
                                        <span>Target Mode</span>
                                        <small>See target, stop when you think time is up</small>
                                    </button>
                                    <button class="mode-btn" data-mode="mystery" id="mode-mystery">
                                        <i data-lucide="help-circle"></i>
                                        <span>Mystery Mode</span>
                                        <small>Count seconds, guess elapsed time after beep</small>
                                    </button>
                                </div>
                            </div>

                            <div class="setting-group">
                                <label>Time Range (seconds)</label>
                                <div class="range-inputs">
                                    <input type="number" id="time-min" value="10" min="5" max="120">
                                    <span>to</span>
                                    <input type="number" id="time-max" value="60" min="10" max="300">
                                </div>
                            </div>
                            <div class="setting-group">
                                <label>Number of Rounds</label>
                                <input type="number" id="time-rounds" value="5" min="1" max="20" class="full-width">
                            </div>
                            <div class="setting-group" id="blind-mode-option">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="time-blind-mode">
                                    <span>Blind Mode (no visual timer)</span>
                                </label>
                            </div>
                            <button class="btn btn-primary btn-large" id="time-start">
                                <i data-lucide="play"></i>
                                Start Exercise
                            </button>
                        </div>

                        <!-- Target Mode Active (user stops timer) -->
                        <div class="exercise-active card hidden" id="time-active">
                            <div class="exercise-display">
                                <div class="target-time">Count to <span id="time-target">30</span> seconds</div>
                                <div class="round-indicator">Round <span id="time-round">1</span> of <span
                                        id="time-total-rounds">5</span></div>
                                <div class="elapsed-display" id="time-elapsed">
                                    <div class="elapsed-visual"></div>
                                </div>
                            </div>
                            <button class="btn btn-accent btn-xlarge" id="time-stop-btn">
                                <i data-lucide="hand"></i>
                                Stop!
                            </button>
                            <button class="btn btn-secondary" id="time-cancel">Cancel Exercise</button>
                        </div>

                        <!-- Mystery Mode Active (waiting for beep) -->
                        <div class="exercise-active card hidden" id="time-mystery-active">
                            <div class="exercise-display">
                                <div class="mystery-prompt">Count the seconds in your head...</div>
                                <div class="round-indicator">Round <span id="mystery-round">1</span> of <span
                                        id="mystery-total-rounds">5</span></div>
                                <div class="mystery-visual">
                                    <div class="mystery-circle"></div>
                                    <p class="mystery-hint">Wait for the signal</p>
                                </div>
                            </div>
                            <button class="btn btn-secondary" id="mystery-cancel">Cancel Exercise</button>
                        </div>

                        <!-- Mystery Mode Input (after beep, enter guess) -->
                        <div class="exercise-input card hidden" id="time-mystery-input">
                            <h3>Time!</h3>
                            <p class="input-prompt">How many seconds elapsed?</p>
                            <input type="number" id="time-user-guess" min="1" max="999" placeholder="Enter seconds"
                                class="count-input">
                            <button class="btn btn-primary btn-large" id="time-submit-guess">
                                <i data-lucide="check"></i>
                                Submit
                            </button>
                        </div>

                        <div class="exercise-results card hidden" id="time-results">
                            <h3>Session Complete!</h3>
                            <div class="results-display">
                                <div class="result-big">
                                    <span class="result-value" id="time-final-accuracy">0%</span>
                                    <span class="result-label">Average Accuracy</span>
                                </div>
                            </div>
                            <div class="round-results" id="time-round-results">
                                <!-- Round results populated dynamically -->
                            </div>
                            <button class="btn btn-primary" id="time-restart">Try Again</button>
                        </div>
                    </div>
                </section>

                <!-- Reaction Test View -->
                <section class="view" id="view-reaction-test">
                    <div class="view-header">
                        <h1>Reaction Test</h1>
                        <p class="subtitle">Measure your reaction speed</p>
                    </div>

                    <div class="exercise-container">
                        <div class="exercise-settings card" id="reaction-settings">
                            <h3>Settings</h3>
                            <div class="setting-group">
                                <label>Number of Trials</label>
                                <input type="number" id="reaction-trials" value="5" min="3" max="20" class="full-width">
                            </div>
                            <div class="setting-group">
                                <label>Stimulus Type</label>
                                <select id="reaction-type" class="full-width">
                                    <option value="visual">Visual (Color Change)</option>
                                    <option value="audio">Audio (Beep)</option>
                                    <option value="both">Both</option>
                                </select>
                            </div>
                            <button class="btn btn-primary btn-large" id="reaction-start">
                                <i data-lucide="play"></i>
                                Start Test
                            </button>
                        </div>

                        <div class="exercise-active card hidden" id="reaction-active">
                            <div class="reaction-zone" id="reaction-zone">
                                <div class="reaction-prompt" id="reaction-prompt">Wait...</div>
                            </div>
                            <div class="reaction-stats">
                                <span>Trial <span id="reaction-trial">1</span> of <span
                                        id="reaction-total">5</span></span>
                            </div>
                        </div>

                        <div class="exercise-results card hidden" id="reaction-results">
                            <h3>Test Complete!</h3>
                            <div class="results-display">
                                <div class="result-big">
                                    <span class="result-value" id="reaction-avg">0ms</span>
                                    <span class="result-label">Average Reaction Time</span>
                                </div>
                            </div>
                            <div class="results-details">
                                <div class="result-item">
                                    <span>Best Time</span>
                                    <span id="reaction-best">0ms</span>
                                </div>
                                <div class="result-item">
                                    <span>Worst Time</span>
                                    <span id="reaction-worst">0ms</span>
                                </div>
                            </div>
                            <div class="trial-results" id="reaction-trial-results"></div>
                            <button class="btn btn-primary" id="reaction-restart">Try Again</button>
                        </div>
                    </div>
                </section>

                <!-- Memory Sequence View -->
                <section class="view" id="view-memory-sequence">
                    <div class="view-header">
                        <h1>Memory Sequence</h1>
                        <p class="subtitle">Remember and repeat the pattern</p>
                    </div>

                    <div class="exercise-container">
                        <div class="exercise-settings card" id="memory-settings">
                            <h3>Settings</h3>
                            <div class="setting-group">
                                <label>Grid Size</label>
                                <select id="memory-grid-size" class="full-width">
                                    <option value="2">2x2 (Easy)</option>
                                    <option value="3" selected>3x3 (Medium)</option>
                                    <option value="4">4x4 (Hard)</option>
                                </select>
                            </div>
                            <div class="setting-group">
                                <label>Speed</label>
                                <select id="memory-speed" class="full-width">
                                    <option value="slow">Slow</option>
                                    <option value="normal" selected>Normal</option>
                                    <option value="fast">Fast</option>
                                </select>
                            </div>
                            <button class="btn btn-primary btn-large" id="memory-start">
                                <i data-lucide="play"></i>
                                Start Game
                            </button>
                        </div>

                        <div class="exercise-active card hidden" id="memory-active">
                            <div class="memory-info">
                                <span class="memory-level">Level: <span id="memory-level">1</span></span>
                                <span class="memory-status" id="memory-status">Watch the pattern...</span>
                            </div>
                            <div class="memory-grid" id="memory-grid">
                                <!-- Grid populated dynamically -->
                            </div>
                        </div>

                        <div class="exercise-results card hidden" id="memory-results">
                            <h3>Game Over!</h3>
                            <div class="results-display">
                                <div class="result-big">
                                    <span class="result-value" id="memory-final-level">0</span>
                                    <span class="result-label">Highest Level</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" id="memory-restart">Play Again</button>
                        </div>
                    </div>
                </section>

                <!-- SART Test View (Replaces Focus Counter) -->
                <section class="view" id="view-focus-counter">
                    <div class="view-header">
                        <h1>SART Test</h1>
                        <p class="subtitle">Sustained Attention to Response Task - Test your inhibition control</p>
                    </div>

                    <div class="exercise-container">
                        <div class="exercise-settings card" id="focus-settings">
                            <h3>Settings</h3>
                            <div class="instruction-box">
                                <i data-lucide="info"></i>
                                <span>Numbers 1-9 appear rapidly. Press SPACE for every number <strong>EXCEPT</strong>
                                    the target. Don't press when you see the target!</span>
                            </div>
                            <div class="setting-group">
                                <label>Target Number (Don't press for this)</label>
                                <select id="sart-target" class="full-width">
                                    <option value="3" selected>3</option>
                                    <option value="5">5</option>
                                    <option value="7">7</option>
                                </select>
                            </div>
                            <div class="setting-group">
                                <label>Speed</label>
                                <select id="sart-speed" class="full-width">
                                    <option value="slow">Slow (1.2s per number)</option>
                                    <option value="normal" selected>Normal (900ms)</option>
                                    <option value="fast">Fast (600ms)</option>
                                    <option value="expert">Expert (400ms)</option>
                                </select>
                            </div>
                            <div class="setting-group">
                                <label>Number of Trials</label>
                                <input type="number" id="sart-trials" value="45" min="20" max="200" class="full-width">
                            </div>
                            <button class="btn btn-primary btn-large" id="focus-start">
                                <i data-lucide="play"></i>
                                Start Test
                            </button>
                        </div>

                        <div class="exercise-active card hidden" id="focus-active">
                            <div class="sart-display">
                                <div class="sart-progress">
                                    Trial <span id="sart-current">0</span> / <span id="sart-total">45</span>
                                </div>
                                <div class="sart-number-container">
                                    <div class="sart-number" id="sart-number">-</div>
                                    <div class="sart-mask" id="sart-mask"></div>
                                </div>
                                <div class="sart-instruction">
                                    Press <kbd>SPACE</kbd> for all numbers except <span class="sart-target-display"
                                        id="sart-target-display">3</span>
                                </div>
                                <div class="sart-feedback" id="sart-feedback"></div>
                            </div>
                            <div class="sart-stats">
                                <div class="inline-stat">
                                    <span class="label">Correct</span>
                                    <span class="value" id="sart-correct">0</span>
                                </div>
                                <div class="inline-stat">
                                    <span class="label">Commission Errors</span>
                                    <span class="value" id="sart-commission">0</span>
                                </div>
                                <div class="inline-stat">
                                    <span class="label">Omission Errors</span>
                                    <span class="value" id="sart-omission">0</span>
                                </div>
                            </div>
                            <button class="btn btn-secondary" id="sart-cancel">Cancel Test</button>
                        </div>

                        <div class="exercise-results card hidden" id="focus-results">
                            <h3>Test Complete!</h3>
                            <div class="results-display">
                                <div class="result-big">
                                    <span class="result-value" id="focus-final-accuracy">0%</span>
                                    <span class="result-label">Accuracy</span>
                                </div>
                            </div>
                            <div class="results-details">
                                <div class="result-item">
                                    <span>Correct Responses</span>
                                    <span id="sart-final-correct">0</span>
                                </div>
                                <div class="result-item">
                                    <span>Commission Errors (pressed on target)</span>
                                    <span id="sart-final-commission">0</span>
                                </div>
                                <div class="result-item">
                                    <span>Omission Errors (missed non-target)</span>
                                    <span id="sart-final-omission">0</span>
                                </div>
                                <div class="result-item">
                                    <span>Average Response Time</span>
                                    <span id="sart-final-rt">0ms</span>
                                </div>
                                <div class="result-item">
                                    <span>Total Time</span>
                                    <span id="focus-final-time">0s</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" id="focus-restart">Try Again</button>
                        </div>
                    </div>
                </section>

                <!-- Guided Meditation View -->
                <section class="view" id="view-guided-meditation">
                    <div class="view-header">
                        <h1>Guided Meditation</h1>
                        <p class="subtitle">Follow along with guided sessions</p>
                    </div>

                    <div class="meditation-list" id="meditation-list">
                        <!-- Meditation cards populated dynamically -->
                    </div>

                    <div class="meditation-player hidden" id="meditation-player">
                        <div class="player-content">
                            <h2 id="meditation-title">Meditation Title</h2>
                            <p id="meditation-description">Description</p>
                            <div class="player-visual">
                                <div class="breathing-circle" id="breathing-circle"></div>
                            </div>
                            <div class="player-text" id="player-text">
                                <!-- Current instruction -->
                            </div>
                            <div class="player-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" id="meditation-progress"></div>
                                </div>
                                <span id="meditation-time">0:00 / 5:00</span>
                            </div>
                            <div class="player-controls">
                                <button class="btn btn-secondary" id="meditation-back">
                                    <i data-lucide="arrow-left"></i>
                                    Back
                                </button>
                                <button class="btn btn-accent" id="meditation-toggle">
                                    <i data-lucide="pause"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Meditation Room View -->
                <section class="view" id="view-meditation-room">
                    <div class="view-header">
                        <h1>Meditation Room</h1>
                        <p class="subtitle">Create your perfect ambient environment</p>
                    </div>

                    <div class="ambient-room">
                        <div class="sound-mixer">
                            <div class="sound-card" data-sound="rain">
                                <i data-lucide="cloud-rain"></i>
                                <span>Rain</span>
                                <input type="range" class="sound-volume" min="0" max="100" value="0">
                            </div>
                            <div class="sound-card" data-sound="ocean">
                                <i data-lucide="waves"></i>
                                <span>Ocean</span>
                                <input type="range" class="sound-volume" min="0" max="100" value="0">
                            </div>
                            <div class="sound-card" data-sound="forest">
                                <i data-lucide="trees"></i>
                                <span>Forest</span>
                                <input type="range" class="sound-volume" min="0" max="100" value="0">
                            </div>
                            <div class="sound-card" data-sound="fire">
                                <i data-lucide="flame"></i>
                                <span>Fireplace</span>
                                <input type="range" class="sound-volume" min="0" max="100" value="0">
                            </div>
                            <div class="sound-card" data-sound="wind">
                                <i data-lucide="wind"></i>
                                <span>Wind</span>
                                <input type="range" class="sound-volume" min="0" max="100" value="0">
                            </div>
                            <div class="sound-card" data-sound="whitenoise">
                                <i data-lucide="radio"></i>
                                <span>White Noise</span>
                                <input type="range" class="sound-volume" min="0" max="100" value="0">
                            </div>
                            <div class="sound-card" data-sound="birds">
                                <i data-lucide="bird"></i>
                                <span>Birds</span>
                                <input type="range" class="sound-volume" min="0" max="100" value="0">
                            </div>
                            <div class="sound-card" data-sound="thunder">
                                <i data-lucide="cloud-lightning"></i>
                                <span>Thunder</span>
                                <input type="range" class="sound-volume" min="0" max="100" value="0">
                            </div>
                        </div>

                        <div class="room-timer card">
                            <h3>Session Timer</h3>
                            <div class="timer-display" id="room-timer-display">00:00</div>
                            <div class="timer-controls">
                                <button class="btn btn-secondary" id="room-timer-reset">Reset</button>
                                <button class="btn btn-accent" id="room-timer-toggle">
                                    <i data-lucide="play"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Meditation Timer View -->
                <section class="view" id="view-meditation-timer">
                    <div class="view-header">
                        <h1>Meditation Timer</h1>
                        <p class="subtitle">Customize your meditation session</p>
                    </div>

                    <div class="timer-container">
                        <div class="timer-setup card" id="timer-setup">
                            <div class="time-picker">
                                <div class="time-input">
                                    <label>Minutes</label>
                                    <input type="number" id="timer-minutes" value="10" min="1" max="120">
                                </div>
                            </div>
                            <div class="setting-group">
                                <label>Interval Bell (minutes)</label>
                                <select id="timer-interval" class="full-width">
                                    <option value="0">None</option>
                                    <option value="1">Every 1 minute</option>
                                    <option value="2">Every 2 minutes</option>
                                    <option value="5" selected>Every 5 minutes</option>
                                    <option value="10">Every 10 minutes</option>
                                </select>
                            </div>
                            <div class="setting-group">
                                <label>End Bell</label>
                                <select id="timer-end-bell" class="full-width">
                                    <option value="gentle">Gentle Chime</option>
                                    <option value="singing-bowl" selected>Singing Bowl</option>
                                    <option value="gong">Deep Gong</option>
                                </select>
                            </div>
                            <button class="btn btn-primary btn-large" id="timer-start">
                                <i data-lucide="play"></i>
                                Start Timer
                            </button>
                        </div>

                        <div class="timer-active card hidden" id="timer-active">
                            <div class="timer-visual">
                                <svg class="timer-ring" viewBox="0 0 200 200">
                                    <circle class="timer-ring-bg" cx="100" cy="100" r="90" />
                                    <circle class="timer-ring-progress" cx="100" cy="100" r="90" id="timer-ring" />
                                </svg>
                                <div class="timer-time" id="timer-time">10:00</div>
                            </div>
                            <div class="timer-controls">
                                <button class="btn btn-secondary" id="timer-cancel">Cancel</button>
                                <button class="btn btn-accent" id="timer-pause">
                                    <i data-lucide="pause"></i>
                                </button>
                            </div>
                        </div>

                        <div class="timer-complete card hidden" id="timer-complete">
                            <div class="complete-icon">
                                <i data-lucide="check-circle"></i>
                            </div>
                            <h2>Session Complete</h2>
                            <p>Great job! You meditated for <span id="timer-final-duration">10</span> minutes.</p>
                            <button class="btn btn-primary" id="timer-restart">New Session</button>
                        </div>
                    </div>
                </section>

                <!-- Advanced Analytics View -->
                <section class="view" id="view-analytics">
                    <div class="view-header">
                        <h1>Advanced Analytics</h1>
                        <p class="subtitle">Deep dive into your performance data</p>
                    </div>

                    <!-- Analytics Controls -->
                    <div class="analytics-controls card">
                        <div class="controls-row">
                            <div class="control-group">
                                <label>Date Range</label>
                                <div class="date-range">
                                    <input type="date" id="analytics-start-date">
                                    <span>to</span>
                                    <input type="date" id="analytics-end-date">
                                </div>
                            </div>
                            <div class="control-group">
                                <label>Quick Range</label>
                                <div class="quick-range-btns">
                                    <button class="range-btn" data-range="7">7D</button>
                                    <button class="range-btn" data-range="30">30D</button>
                                    <button class="range-btn active" data-range="90">90D</button>
                                    <button class="range-btn" data-range="all">All</button>
                                </div>
                            </div>
                            <div class="control-group">
                                <label>Module Filter</label>
                                <select id="analytics-module-filter" class="full-width">
                                    <option value="all">All Modules</option>
                                    <option value="beep-tracker">Beep Tracker</option>
                                    <option value="time-estimation">Time Estimation</option>
                                    <option value="reaction-test">Reaction Test</option>
                                    <option value="memory-sequence">Memory Sequence</option>
                                    <option value="focus-counter">SART Test</option>
                                    <option value="meditation">Meditation</option>
                                </select>
                            </div>
                            <button class="btn btn-primary" id="apply-filters">
                                <i data-lucide="filter"></i>
                                Apply
                            </button>
                        </div>
                    </div>

                    <!-- Statistics Summary -->
                    <div class="stats-summary">
                        <div class="stat-card mini">
                            <div class="stat-info">
                                <span class="stat-value" id="stat-total-sessions">0</span>
                                <span class="stat-label">Sessions</span>
                            </div>
                        </div>
                        <div class="stat-card mini">
                            <div class="stat-info">
                                <span class="stat-value" id="stat-total-time">0m</span>
                                <span class="stat-label">Total Time</span>
                            </div>
                        </div>
                        <div class="stat-card mini">
                            <div class="stat-info">
                                <span class="stat-value" id="stat-avg-accuracy">-</span>
                                <span class="stat-label">Avg Accuracy</span>
                            </div>
                        </div>
                        <div class="stat-card mini">
                            <div class="stat-info">
                                <span class="stat-value" id="stat-best-accuracy">-</span>
                                <span class="stat-label">Best</span>
                            </div>
                        </div>
                        <div class="stat-card mini">
                            <div class="stat-info">
                                <span class="stat-value" id="stat-worst-accuracy">-</span>
                                <span class="stat-label">Worst</span>
                            </div>
                        </div>
                        <div class="stat-card mini">
                            <div class="stat-info">
                                <span class="stat-value" id="stat-std-dev">-</span>
                                <span class="stat-label">Std Dev</span>
                            </div>
                        </div>
                    </div>

                    <!-- Chart Controls -->
                    <div class="chart-controls card">
                        <div class="controls-row">
                            <div class="control-group">
                                <label>Chart Type</label>
                                <div class="chart-type-btns">
                                    <button class="type-btn active" data-chart="line">
                                        <i data-lucide="trending-up"></i>
                                    </button>
                                    <button class="type-btn" data-chart="bar">
                                        <i data-lucide="bar-chart-3"></i>
                                    </button>
                                    <button class="type-btn" data-chart="scatter">
                                        <i data-lucide="scatter-chart"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="control-group metrics-toggles">
                                <label>Metrics</label>
                                <div class="metric-checkboxes">
                                    <label class="metric-toggle">
                                        <input type="checkbox" id="metric-accuracy" checked>
                                        <span class="metric-color accuracy"></span>
                                        <span>Accuracy</span>
                                    </label>
                                    <label class="metric-toggle">
                                        <input type="checkbox" id="metric-duration">
                                        <span class="metric-color duration"></span>
                                        <span>Duration</span>
                                    </label>
                                    <label class="metric-toggle">
                                        <input type="checkbox" id="metric-score">
                                        <span class="metric-color score"></span>
                                        <span>Score</span>
                                    </label>
                                </div>
                            </div>
                            <div class="control-group">
                                <label>Aggregation</label>
                                <select id="analytics-aggregation">
                                    <option value="none">Individual Sessions</option>
                                    <option value="day">Daily Average</option>
                                    <option value="week">Weekly Average</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Main Chart -->
                    <div class="card chart-card-full">
                        <div class="chart-header">
                            <h3>Performance Over Time</h3>
                            <div class="chart-legend" id="chart-legend"></div>
                        </div>
                        <canvas id="main-analytics-chart"></canvas>
                    </div>

                    <!-- Secondary Charts Row -->
                    <div class="analytics-charts-row">
                        <div class="card chart-card">
                            <h3>Module Distribution</h3>
                            <canvas id="module-distribution-chart"></canvas>
                        </div>
                        <div class="card chart-card">
                            <h3>Time of Day Analysis</h3>
                            <canvas id="time-of-day-chart"></canvas>
                        </div>
                    </div>

                    <!-- Data Table -->
                    <div class="card data-table-card">
                        <div class="table-header">
                            <h3>Session Data</h3>
                            <div class="table-actions">
                                <button class="btn btn-secondary btn-small" id="export-csv">
                                    <i data-lucide="file-spreadsheet"></i>
                                    Export CSV
                                </button>
                                <button class="btn btn-secondary btn-small" id="export-json">
                                    <i data-lucide="file-json"></i>
                                    Export JSON
                                </button>
                            </div>
                        </div>
                        <div class="data-table-container">
                            <table class="data-table" id="sessions-table">
                                <thead>
                                    <tr>
                                        <th data-sort="date">Date <i data-lucide="arrow-up-down"></i></th>
                                        <th data-sort="module">Module</th>
                                        <th data-sort="duration">Duration</th>
                                        <th data-sort="accuracy">Accuracy</th>
                                        <th data-sort="score">Score</th>
                                        <th>Details</th>
                                    </tr>
                                </thead>
                                <tbody id="sessions-table-body">
                                    <!-- Populated dynamically -->
                                </tbody>
                            </table>
                        </div>
                        <div class="table-pagination">
                            <button class="btn btn-secondary btn-small" id="prev-page" disabled>
                                <i data-lucide="chevron-left"></i>
                            </button>
                            <span id="page-info">Page 1 of 1</span>
                            <button class="btn btn-secondary btn-small" id="next-page" disabled>
                                <i data-lucide="chevron-right"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Data Management -->
                    <div class="card">
                        <h3>Data Management</h3>
                        <div class="data-actions">
                            <button class="btn btn-secondary" id="export-data">
                                <i data-lucide="download"></i>
                                Export All Data
                            </button>
                            <button class="btn btn-secondary" id="import-data">
                                <i data-lucide="upload"></i>
                                Import Data
                            </button>
                            <button class="btn btn-danger" id="clear-data">
                                <i data-lucide="trash-2"></i>
                                Clear All Data
                            </button>
                            <input type="file" id="import-file" accept=".json" hidden>
                        </div>
                    </div>
                </section>

                <!-- Settings View -->
                <section class="view" id="view-settings">
                    <div class="view-header">
                        <h1>Settings</h1>
                        <p class="subtitle">Customize your experience</p>
                    </div>

                    <div class="settings-grid">
                        <div class="card">
                            <h3>Audio Settings</h3>
                            <div class="setting-group">
                                <label>Master Volume</label>
                                <input type="range" id="master-volume" min="0" max="100" value="70">
                            </div>
                            <div class="setting-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="sound-effects" checked>
                                    <span>Sound Effects</span>
                                </label>
                            </div>
                        </div>

                        <div class="card">
                            <h3>Display</h3>
                            <div class="setting-group">
                                <label>Theme</label>
                                <select id="theme-select" class="full-width">
                                    <option value="dark" selected>Dark</option>
                                    <option value="light">Light</option>
                                </select>
                            </div>
                        </div>

                        <div class="card danger-zone">
                            <h3>Danger Zone</h3>
                            <button class="btn btn-danger" id="clear-all-data">
                                <i data-lucide="trash-2"></i>
                                Clear All Data
                            </button>
                            <p class="warning-text">This will permanently delete all your progress and settings.</p>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Scripts -->
    <script src="js/analytics.js"></script>
    <script src="js/audio.js"></script>
    <script src="js/beep-tracker.js"></script>
    <script src="js/time-estimation.js"></script>
    <script src="js/reaction-test.js"></script>
    <script src="js/memory-sequence.js"></script>
    <script src="js/focus-counter.js"></script>
    <script src="js/meditation.js"></script>
    <script src="js/meditation-room.js"></script>
    <script src="js/meditation-timer.js"></script>
    <script src="js/advanced-analytics.js"></script>
    <script src="app.js"></script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(registration => {
                        console.log('Mind Gym PWA: Service Worker registered');
                    })
                    .catch(error => {
                        console.log('Mind Gym PWA: Service Worker registration failed:', error);
                    });
            });
        }
    </script>
</body>

</html>